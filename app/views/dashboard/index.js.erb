var table = document.getElementById('article_table')
var article_selects = document.getElementsByName('article_select')
document.addEventListener('ajax:success', (e)=>{
  const target = e.target
  if (target.dataset.mode === 'draft') {
    for (let i = 0; i < article_selects.length; i++) {
      article_selects.item(i).checked = ''
    }
    target.firstElementChild.checked = "checked"
    history.replaceState(null, null, window.location.pathname + "?mode=draft")
    table.innerHTML = '<%= j(render "table", articles: @drafts) %>'
  }

  if (target.dataset.mode === 'public') {
    for (let i = 0; i < article_selects.length; i++) {
      article_selects.item(i).checked = ''
    }
    target.firstElementChild.checked = "checked"
    console.log(window.location)
    history.replaceState(null, null, window.location.pathname + "?mode=public")
    table.innerHTML = '<%= j(render "table", articles: @publics) %>'
  }
})
